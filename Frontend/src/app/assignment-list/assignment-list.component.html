<div for="search-text" class="assignment-header">Assignment</div>
<div class="assignment-part">
  <div class="assignmentsearch">
    <div class="form-group">
      <input
        type="text"
        class="form-control search"
        id="search-text"
        [(ngModel)]="assignmentsearchText"
        placeholder="All Assignment"
      />
    </div>

    <select class="form-control complete" [(ngModel)]="completedStatusCheck">
      <option [ngValue]="undefined">All</option>
      <option [ngValue]="true">Complete</option>
      <option [ngValue]="false">Incomplete</option>
    </select>
  </div>

  <ng-template #content let-modal>
    <app-assignment-form (submitCompleted)="close()"></app-assignment-form>
  </ng-template>
  <button (click)="open(content)" class="btn btn-lg me-btn-add">
    + assignment
  </button>

  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <div
        class="card"
        *ngFor="
          let r of result
            | completedstatusFilter: completedStatusCheck
            | assignmentFilter: assignmentsearchText;
          index as i
        "
      >
        <div class="card-body">
          <p class="card-text text" style="font-weight: bold">
            <mat-icon
              class="icon-complete"
              title="{{ r.completedStatus | titlecompletedStatusPipe }}"
              (click)="toggle(i, r.assignmentId, r.completedStatus)"
              [ngStyle]="{
                color:
                  r.completedStatus
                  | colorcompletedStatusPipe: r.completedStatus
              }"
              >check_circle</mat-icon
            >
            {{ r.assignmentName }}

            <span class="close" (click)="updateDeleteStatus(r.assignmentId)"
              >&times;</span
            >
          </p>

          <hr class="solid" />
          <div class="progress1">
            <span>progress :</span>
            <span class="progress-bar1">
              <mat-progress-bar
                mode="determinate"
                value="{{ (r.totalActualTime / r.estimateTime) * 100 }}"
              ></mat-progress-bar>
            </span>
          </div>
          <div>end date :</div>
          <div class="d-flex" title="billable time">
            <div class="d-flex">
              <i class="material-icons md-18">ic_monetization_on</i>
              <p>
                <!-- Billable Time: -->
                {{ r.billableTime }} Hrs
              </p>
            </div>

            <div class="d-flex" title="estimate time">
              <i class="material-icons md-18">ic_query_builder</i>
              <p>
                <!-- Estimate Time: -->
                {{ r.estimateTime }} Hrs
              </p>
            </div>

            <div class="d-flex" title="actual time">
              <i class="material-icons md-18">ic_watch_later</i>
              <p>
                <!-- Actual Time: -->
                {{ r.totalActualTime }} Hrs
              </p>
            </div>

            <!-- <div *ngIf="r['cardObj'].length > 0">
              <span
                (click)="isCollapsed = !isCollapsed; collapsed(r.assignmentId)"
                [attr.aria-expanded]="!isCollapsed"
                aria-controls="collapse"
              >
                <mat-icon class="cursor">expand_more</mat-icon>
              </span>
            </div> -->
          </div>

          <!-- <div id="collapse" [ngbCollapse]="isCollapsed">
            <div *ngIf="r.assignmentId == collapesdId">
              <div class="card childCard" *ngFor="let co of r['cardObj']">
                <div class="card-body">
                  <div class="d-flex">
                    <p>Card : {{ co.cardName }}</p>
                    <p>Date :{{ co.cardDate | date: "dd/MM/yyyy" }}</p>
                    <p>Actual Time : {{ co.cardActualTime }} Hrs.</p>
                  </div>
                </div>
              </div>
            </div>
          </div> -->

          <div *ngIf="r['cardObj'].length > 0">
            <div class="row mt-4">
              <div class="col-12">
                <div>
                  <button
                    (click)="r.isCollapsed = !r.isCollapsed"
                    [attr.aria-expanded]="!r.isCollapsed"
                    aria-controls="collapseExample"
                  >
                    <!-- <i class="fa" aria-hidden="true"></i> -->
                    <mat-icon class="fa" aria-hidden="true" class="cursor"
                      >expand_more</mat-icon
                    >
                  </button>
                </div>

                <div [ngbCollapse]="r.isCollapsed">
                  <div *ngFor="let co of r['cardObj']">

                    <p>Card : {{ co.cardName }}</p>
                    <p>Date :{{ co.cardDate | date: "dd/MM/yyyy" }}</p>
                    <p>Actual Time : {{ co.cardActualTime }} Hrs.</p>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div>
